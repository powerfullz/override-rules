/*!
powerfullz çš„ Substore è®¢é˜…è½¬æ¢è„šæœ¬
https://github.com/powerfullz/override-rules

æ”¯æŒçš„ä¼ å…¥å‚æ•°ï¼š
- loadbalance: å¯ç”¨è´Ÿè½½å‡è¡¡ï¼ˆurl-test/load-balanceï¼Œé»˜è®¤ falseï¼‰
- landing: å¯ç”¨è½åœ°èŠ‚ç‚¹åŠŸèƒ½ï¼ˆå¦‚æœºåœºå®¶å®½/æ˜Ÿé“¾/è½åœ°åˆ†ç»„ï¼Œé»˜è®¤ falseï¼‰
- ipv6: å¯ç”¨ IPv6 æ”¯æŒï¼ˆé»˜è®¤ falseï¼‰
- full: è¾“å‡ºå®Œæ•´é…ç½®ï¼ˆé€‚åˆçº¯å†…æ ¸å¯åŠ¨ï¼Œé»˜è®¤ falseï¼‰
- keepalive: å¯ç”¨ tcp-keep-aliveï¼ˆé»˜è®¤ falseï¼‰
- fakeip: DNS ä½¿ç”¨ FakeIP æ¨¡å¼ï¼ˆé»˜è®¤ falseï¼Œfalse ä¸º RedirHostï¼‰
- quic: å…è®¸ QUIC æµé‡ï¼ˆUDP 443ï¼Œé»˜è®¤ falseï¼‰
- threshold: å›½å®¶èŠ‚ç‚¹æ•°é‡å°äºŽè¯¥å€¼æ—¶ä¸æ˜¾ç¤ºåˆ†ç»„ (é»˜è®¤ 0)
- regex: ä½¿ç”¨æ­£åˆ™è¿‡æ»¤æ¨¡å¼ï¼ˆinclude-all + filterï¼‰å†™å…¥å„å›½å®¶ä»£ç†ç»„ï¼Œè€Œéžç›´æŽ¥æžšä¸¾èŠ‚ç‚¹åç§°ï¼ˆé»˜è®¤ falseï¼‰
*/
const NODE_SUFFIX="èŠ‚ç‚¹";function parseBool(e){return"boolean"==typeof e?e:"string"==typeof e&&("true"===e.toLowerCase()||"1"===e)}function parseNumber(e,t=0){if(null==e)return t;const o=parseInt(e,10);return isNaN(o)?t:o}function buildFeatureFlags(e){const t=Object.entries({loadbalance:"loadBalance",landing:"landing",ipv6:"ipv6Enabled",full:"fullConfig",keepalive:"keepAliveEnabled",fakeip:"fakeIPEnabled",quic:"quicEnabled",regex:"regexFilter"}).reduce((t,[o,r])=>(t[r]=parseBool(e[o])||!1,t),{});return t.countryThreshold=parseNumber(e.threshold,0),t}const rawArgs="undefined"!=typeof $arguments?$arguments:{},{loadBalance:loadBalance,landing:landing,ipv6Enabled:ipv6Enabled,fullConfig:fullConfig,keepAliveEnabled:keepAliveEnabled,fakeIPEnabled:fakeIPEnabled,quicEnabled:quicEnabled,regexFilter:regexFilter,countryThreshold:countryThreshold}=buildFeatureFlags(rawArgs);function getCountryGroupNames(e,t){const o=e.filter(e=>e.nodes.length>=t);return o.sort((e,t)=>(countriesMeta[e.country]?.weight??1/0)-(countriesMeta[t.country]?.weight??1/0)),o.map(e=>e.country+"èŠ‚ç‚¹")}function stripNodeSuffix(e){const t=new RegExp("èŠ‚ç‚¹$");return e.map(e=>e.replace(t,""))}const PROXY_GROUPS={SELECT:"é€‰æ‹©ä»£ç†",MANUAL:"æ‰‹åŠ¨é€‰æ‹©",FALLBACK:"æ•…éšœè½¬ç§»",DIRECT:"ç›´è¿ž",LANDING:"è½åœ°èŠ‚ç‚¹",LOW_COST:"ä½Žå€çŽ‡èŠ‚ç‚¹"},buildList=(...e)=>e.flat().filter(Boolean);function buildBaseLists({landing:e,lowCostNodes:t,countryGroupNames:o}){const r=t.length>0||regexFilter,n=buildList(PROXY_GROUPS.FALLBACK,e&&PROXY_GROUPS.LANDING,o,r&&PROXY_GROUPS.LOW_COST,PROXY_GROUPS.MANUAL,"DIRECT");return{defaultProxies:buildList(PROXY_GROUPS.SELECT,o,r&&PROXY_GROUPS.LOW_COST,PROXY_GROUPS.MANUAL,PROXY_GROUPS.DIRECT),defaultProxiesDirect:buildList(PROXY_GROUPS.DIRECT,o,r&&PROXY_GROUPS.LOW_COST,PROXY_GROUPS.SELECT,PROXY_GROUPS.MANUAL),defaultSelector:n,defaultFallback:buildList(e&&PROXY_GROUPS.LANDING,o,r&&PROXY_GROUPS.LOW_COST,PROXY_GROUPS.MANUAL,"DIRECT")}}const ruleProviders={ADBlock:{type:"http",behavior:"domain",format:"mrs",interval:86400,url:"https://adrules.top/adrules-mihomo.mrs",path:"./ruleset/ADBlock.mrs"},SogouInput:{type:"http",behavior:"classical",format:"text",interval:86400,url:"https://ruleset.skk.moe/Clash/non_ip/sogouinput.txt",path:"./ruleset/SogouInput.txt"},StaticResources:{type:"http",behavior:"domain",format:"text",interval:86400,url:"https://ruleset.skk.moe/Clash/domainset/cdn.txt",path:"./ruleset/StaticResources.txt"},CDNResources:{type:"http",behavior:"classical",format:"text",interval:86400,url:"https://ruleset.skk.moe/Clash/non_ip/cdn.txt",path:"./ruleset/CDNResources.txt"},TikTok:{type:"http",behavior:"classical",format:"text",interval:86400,url:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/TikTok.list",path:"./ruleset/TikTok.list"},EHentai:{type:"http",behavior:"classical",format:"text",interval:86400,url:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/EHentai.list",path:"./ruleset/EHentai.list"},SteamFix:{type:"http",behavior:"classical",format:"text",interval:86400,url:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/SteamFix.list",path:"./ruleset/SteamFix.list"},GoogleFCM:{type:"http",behavior:"classical",format:"text",interval:86400,url:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/FirebaseCloudMessaging.list",path:"./ruleset/FirebaseCloudMessaging.list"},AdditionalFilter:{type:"http",behavior:"classical",format:"text",interval:86400,url:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/AdditionalFilter.list",path:"./ruleset/AdditionalFilter.list"},AdditionalCDNResources:{type:"http",behavior:"classical",format:"text",interval:86400,url:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/AdditionalCDNResources.list",path:"./ruleset/AdditionalCDNResources.list"},Crypto:{type:"http",behavior:"classical",format:"text",interval:86400,url:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/ruleset/Crypto.list",path:"./ruleset/Crypto.list"}},baseRules=["RULE-SET,ADBlock,å¹¿å‘Šæ‹¦æˆª","RULE-SET,AdditionalFilter,å¹¿å‘Šæ‹¦æˆª","RULE-SET,SogouInput,æœç‹—è¾“å…¥æ³•","DOMAIN-SUFFIX,truthsocial.com,Truth Social","RULE-SET,StaticResources,é™æ€èµ„æº","RULE-SET,CDNResources,é™æ€èµ„æº","RULE-SET,AdditionalCDNResources,é™æ€èµ„æº","RULE-SET,Crypto,Crypto","RULE-SET,EHentai,E-Hentai","RULE-SET,TikTok,TikTok",`RULE-SET,SteamFix,${PROXY_GROUPS.DIRECT}`,`RULE-SET,GoogleFCM,${PROXY_GROUPS.DIRECT}`,`DOMAIN,services.googleapis.cn,${PROXY_GROUPS.SELECT}`,"GEOSITE,CATEGORY-AI-!CN,AI",`GEOSITE,GOOGLE-PLAY@CN,${PROXY_GROUPS.DIRECT}`,`GEOSITE,MICROSOFT@CN,${PROXY_GROUPS.DIRECT}`,"GEOSITE,ONEDRIVE,OneDrive","GEOSITE,MICROSOFT,Microsoft","GEOSITE,TELEGRAM,Telegram","GEOSITE,YOUTUBE,YouTube","GEOSITE,GOOGLE,Google","GEOSITE,NETFLIX,Netflix","GEOSITE,SPOTIFY,Spotify","GEOSITE,BAHAMUT,Bahamut","GEOSITE,BILIBILI,Bilibili","GEOSITE,PIKPAK,PikPak",`GEOSITE,GFW,${PROXY_GROUPS.SELECT}`,`GEOSITE,CN,${PROXY_GROUPS.DIRECT}`,`GEOSITE,PRIVATE,${PROXY_GROUPS.DIRECT}`,"GEOIP,NETFLIX,Netflix,no-resolve","GEOIP,TELEGRAM,Telegram,no-resolve",`GEOIP,CN,${PROXY_GROUPS.DIRECT}`,`GEOIP,PRIVATE,${PROXY_GROUPS.DIRECT}`,"DST-PORT,22,SSH(22ç«¯å£)",`MATCH,${PROXY_GROUPS.SELECT}`];function buildRules({quicEnabled:e}){const t=[...baseRules];return e||t.unshift("AND,((DST-PORT,443),(NETWORK,UDP)),REJECT"),t}const snifferConfig={sniff:{TLS:{ports:[443,8443]},HTTP:{ports:[80,8080,8880]},QUIC:{ports:[443,8443]}},"override-destination":!1,enable:!0,"force-dns-mapping":!0,"skip-domain":["Mijia Cloud","dlg.io.mi.com","+.push.apple.com"]};function buildDnsConfig({mode:e,fakeIpFilter:t}){const o={enable:!0,ipv6:ipv6Enabled,"prefer-h3":!0,"enhanced-mode":e,"default-nameserver":["119.29.29.29","223.5.5.5"],nameserver:["system","223.5.5.5","119.29.29.29","180.184.1.1"],fallback:["quic://dns0.eu","https://dns.cloudflare.com/dns-query","https://dns.sb/dns-query","tcp://208.67.222.222","tcp://8.26.56.2"],"proxy-server-nameserver":["https://dns.alidns.com/dns-query","tls://dot.pub"]};return t&&(o["fake-ip-filter"]=t),o}const dnsConfig=buildDnsConfig({mode:"redir-host"}),dnsConfigFakeIp=buildDnsConfig({mode:"fake-ip",fakeIpFilter:["geosite:private","geosite:connectivity-check","geosite:cn","Mijia Cloud","dig.io.mi.com","localhost.ptlogin2.qq.com","*.icloud.com","*.stun.*.*","*.stun.*.*.*"]}),geoxURL={geoip:"https://gcore.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/geoip.dat",geosite:"https://gcore.jsdelivr.net/gh/Loyalsoldier/v2ray-rules-dat@release/geosite.dat",mmdb:"https://gcore.jsdelivr.net/gh/Loyalsoldier/geoip@release/Country.mmdb",asn:"https://gcore.jsdelivr.net/gh/Loyalsoldier/geoip@release/GeoLite2-ASN.mmdb"},countriesMeta={"é¦™æ¸¯":{weight:10,pattern:"é¦™æ¸¯|æ¸¯|HK|hk|Hong Kong|HongKong|hongkong|ðŸ‡­ðŸ‡°",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hong_Kong.png"},"æ¾³é—¨":{pattern:"æ¾³é—¨|MO|Macau|ðŸ‡²ðŸ‡´",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Macao.png"},"å°æ¹¾":{weight:20,pattern:"å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan|ðŸ‡¹ðŸ‡¼",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Taiwan.png"},"æ–°åŠ å¡":{weight:30,pattern:"æ–°åŠ å¡|å¡|ç‹®åŸŽ|SG|Singapore|ðŸ‡¸ðŸ‡¬",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Singapore.png"},"æ—¥æœ¬":{weight:40,pattern:"æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼çŽ‰|æ²ªæ—¥|æ·±æ—¥|JP|Japan|ðŸ‡¯ðŸ‡µ",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Japan.png"},"éŸ©å›½":{pattern:"KR|Korea|KOR|é¦–å°”|éŸ©|éŸ“|ðŸ‡°ðŸ‡·",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Korea.png"},"ç¾Žå›½":{weight:50,pattern:"ç¾Žå›½|ç¾Ž|US|United States|ðŸ‡ºðŸ‡¸",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_States.png"},"åŠ æ‹¿å¤§":{pattern:"åŠ æ‹¿å¤§|Canada|CA|ðŸ‡¨ðŸ‡¦",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Canada.png"},"è‹±å›½":{weight:60,pattern:"è‹±å›½|United Kingdom|UK|ä¼¦æ•¦|London|ðŸ‡¬ðŸ‡§",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/United_Kingdom.png"},"æ¾³å¤§åˆ©äºš":{pattern:"æ¾³æ´²|æ¾³å¤§åˆ©äºš|AU|Australia|ðŸ‡¦ðŸ‡º",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Australia.png"},"å¾·å›½":{weight:70,pattern:"å¾·å›½|å¾·|DE|Germany|ðŸ‡©ðŸ‡ª",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Germany.png"},"æ³•å›½":{weight:80,pattern:"æ³•å›½|æ³•|FR|France|ðŸ‡«ðŸ‡·",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/France.png"},"ä¿„ç½—æ–¯":{pattern:"ä¿„ç½—æ–¯|ä¿„|RU|Russia|ðŸ‡·ðŸ‡º",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Russia.png"},"æ³°å›½":{pattern:"æ³°å›½|æ³°|TH|Thailand|ðŸ‡¹ðŸ‡­",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Thailand.png"},"å°åº¦":{pattern:"å°åº¦|IN|India|ðŸ‡®ðŸ‡³",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/India.png"},"é©¬æ¥è¥¿äºš":{pattern:"é©¬æ¥è¥¿äºš|é©¬æ¥|MY|Malaysia|ðŸ‡²ðŸ‡¾",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Malaysia.png"}},LOW_COST_REGEX=/0\.[0-5]|ä½Žå€çŽ‡|çœæµ|å¤§æµé‡|å®žéªŒæ€§/i,LANDING_REGEX=/å®¶å®½|å®¶åº­|å®¶åº­å®½å¸¦|å•†å®½|å•†ä¸šå®½å¸¦|æ˜Ÿé“¾|Starlink|è½åœ°/i,LANDING_PATTERN="(?i)å®¶å®½|å®¶åº­|å®¶åº­å®½å¸¦|å•†å®½|å•†ä¸šå®½å¸¦|æ˜Ÿé“¾|Starlink|è½åœ°";function parseLowCost(e){return(e.proxies||[]).filter(e=>LOW_COST_REGEX.test(e.name)).map(e=>e.name)}function parseLandingNodes(e){return(e.proxies||[]).filter(e=>LANDING_REGEX.test(e.name)).map(e=>e.name)}function parseCountries(e){const t=e.proxies||[],o=Object.create(null),r={};for(const[e,t]of Object.entries(countriesMeta))r[e]=new RegExp(t.pattern.replace(/^\(\?i\)/,""));for(const e of t){const t=e.name||"";if(!LANDING_REGEX.test(t)&&!LOW_COST_REGEX.test(t))for(const[e,n]of Object.entries(r))if(n.test(t)){o[e]||(o[e]=[]),o[e].push(t);break}}const n=[];for(const[e,t]of Object.entries(o))n.push({country:e,nodes:t});return n}function buildCountryProxyGroups({countries:e,landing:t,loadBalance:o,regexFilter:r,countryInfo:n}){const s=[],l="0\\.[0-5]|ä½Žå€çŽ‡|çœæµ|å¤§æµé‡|å®žéªŒæ€§",i=LANDING_PATTERN,a=o?"load-balance":"url-test",c=r?null:Object.fromEntries(n.map(e=>[e.country,e.nodes]));for(const n of e){const e=countriesMeta[n];if(!e)continue;let p;if(r)p={name:`${n}èŠ‚ç‚¹`,icon:e.icon,"include-all":!0,filter:e.pattern,"exclude-filter":t?`${i}|${l}`:l,type:a};else{const t=c[n]||[];p={name:`${n}èŠ‚ç‚¹`,icon:e.icon,type:a,proxies:t}}o||Object.assign(p,{url:"https://cp.cloudflare.com/generate_204",interval:60,tolerance:20,lazy:!1}),s.push(p)}return s}function buildProxyGroups({landing:e,countries:t,countryProxyGroups:o,lowCostNodes:r,landingNodes:n,defaultProxies:s,defaultProxiesDirect:l,defaultSelector:i,defaultFallback:a}){const c=t.includes("å°æ¹¾"),p=t.includes("é¦™æ¸¯"),u=t.includes("ç¾Žå›½"),d=e?i.filter(e=>e!==PROXY_GROUPS.LANDING&&e!==PROXY_GROUPS.FALLBACK):[];return[{name:PROXY_GROUPS.SELECT,icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Proxy.png",type:"select",proxies:i},{name:PROXY_GROUPS.MANUAL,icon:"https://gcore.jsdelivr.net/gh/shindgewongxj/WHATSINStash@master/icon/select.png","include-all":!0,type:"select"},e?{name:"å‰ç½®ä»£ç†",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Area.png",type:"select",...regexFilter?{"include-all":!0,"exclude-filter":LANDING_PATTERN,proxies:d}:{proxies:d}}:null,e?{name:PROXY_GROUPS.LANDING,icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Airport.png",type:"select",...regexFilter?{"include-all":!0,filter:LANDING_PATTERN}:{proxies:n}}:null,{name:PROXY_GROUPS.FALLBACK,icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Bypass.png",type:"fallback",url:"https://cp.cloudflare.com/generate_204",proxies:a,interval:180,tolerance:20,lazy:!1},{name:"é™æ€èµ„æº",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Cloudflare.png",type:"select",proxies:s},{name:"AI",icon:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/icons/chatgpt.png",type:"select",proxies:s},{name:"Crypto",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Cryptocurrency_3.png",type:"select",proxies:s},{name:"Google",icon:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/icons/Google.png",type:"select",proxies:s},{name:"Microsoft",icon:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/icons/Microsoft_Copilot.png",type:"select",proxies:s},{name:"YouTube",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/YouTube.png",type:"select",proxies:s},{name:"Bilibili",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/bilibili.png",type:"select",proxies:c&&p?[PROXY_GROUPS.DIRECT,"å°æ¹¾èŠ‚ç‚¹","é¦™æ¸¯èŠ‚ç‚¹"]:l},{name:"Bahamut",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Bahamut.png",type:"select",proxies:c?["å°æ¹¾èŠ‚ç‚¹",PROXY_GROUPS.SELECT,PROXY_GROUPS.MANUAL,PROXY_GROUPS.DIRECT]:s},{name:"Netflix",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Netflix.png",type:"select",proxies:s},{name:"TikTok",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/TikTok.png",type:"select",proxies:s},{name:"Spotify",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Spotify.png",type:"select",proxies:s},{name:"E-Hentai",icon:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/icons/Ehentai.png",type:"select",proxies:s},{name:"Telegram",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Telegram.png",type:"select",proxies:s},{name:"Truth Social",icon:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/icons/TruthSocial.png",type:"select",proxies:u?["ç¾Žå›½èŠ‚ç‚¹",PROXY_GROUPS.SELECT,PROXY_GROUPS.MANUAL]:s},{name:"OneDrive",icon:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/icons/Onedrive.png",type:"select",proxies:s},{name:"PikPak",icon:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/icons/PikPak.png",type:"select",proxies:s},{name:"SSH(22ç«¯å£)",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Server.png",type:"select",proxies:s},{name:"æœç‹—è¾“å…¥æ³•",icon:"https://gcore.jsdelivr.net/gh/powerfullz/override-rules@master/icons/Sougou.png",type:"select",proxies:[PROXY_GROUPS.DIRECT,"REJECT"]},{name:PROXY_GROUPS.DIRECT,icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Direct.png",type:"select",proxies:["DIRECT",PROXY_GROUPS.SELECT]},{name:"å¹¿å‘Šæ‹¦æˆª",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/AdBlack.png",type:"select",proxies:["REJECT","REJECT-DROP",PROXY_GROUPS.DIRECT]},r.length>0||regexFilter?{name:PROXY_GROUPS.LOW_COST,icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Lab.png",type:"url-test",url:"https://cp.cloudflare.com/generate_204",...regexFilter?{"include-all":!0,filter:"(?i)0\\.[0-5]|ä½Žå€çŽ‡|çœæµ|å¤§æµé‡|å®žéªŒæ€§"}:{proxies:r}}:null,...o].filter(Boolean)}function main(e){const t={proxies:e.proxies},o=parseCountries(t),r=parseLowCost(t),n=landing?parseLandingNodes(t):[],s=getCountryGroupNames(o,countryThreshold),l=stripNodeSuffix(s),{defaultProxies:i,defaultProxiesDirect:a,defaultSelector:c,defaultFallback:p}=buildBaseLists({landing:landing,lowCostNodes:r,countryGroupNames:s}),u=buildCountryProxyGroups({countries:l,landing:landing,loadBalance:loadBalance,regexFilter:regexFilter,countryInfo:o}),d=buildProxyGroups({landing:landing,countries:l,countryProxyGroups:u,lowCostNodes:r,landingNodes:n,defaultProxies:i,defaultProxiesDirect:a,defaultSelector:c,defaultFallback:p}),g=d.map(e=>e.name);d.push({name:"GLOBAL",icon:"https://gcore.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png","include-all":!0,type:"select",proxies:g});const h=buildRules({quicEnabled:quicEnabled});return fullConfig&&Object.assign(t,{"mixed-port":7890,"redir-port":7892,"tproxy-port":7893,"routing-mark":7894,"allow-lan":!0,ipv6:ipv6Enabled,mode:"rule","unified-delay":!0,"tcp-concurrent":!0,"find-process-mode":"off","log-level":"info","geodata-loader":"standard","external-controller":":9999","disable-keep-alive":!keepAliveEnabled,profile:{"store-selected":!0}}),Object.assign(t,{"proxy-groups":d,"rule-providers":ruleProviders,rules:h,sniffer:snifferConfig,dns:fakeIPEnabled?dnsConfigFakeIp:dnsConfig,"geodata-mode":!0,"geox-url":geoxURL}),t}